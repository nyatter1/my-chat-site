<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChatApp - Themes</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .theme-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }
        .theme-card:hover {
            transform: translateY(-4px);
        }
        .theme-card.active {
            border-color: #6366f1;
            background: rgba(99, 102, 241, 0.1);
        }
        .preview-bubble {
            transition: background-color 0.3s ease;
        }
    </style>
</head>
<body class="bg-slate-950 text-slate-200 min-h-screen font-sans">

    <div class="max-w-4xl mx-auto p-6 md:p-12">
        <div class="flex items-center justify-between mb-12">
            <div>
                <h1 class="text-3xl font-black italic tracking-tight text-white mb-2 uppercase">Custom Themes</h1>
                <p class="text-slate-400 text-sm">Personalize your chat experience with custom accent colors.</p>
            </div>
            <a href="/index.html" class="bg-slate-900 border border-slate-800 px-5 py-2.5 rounded-xl text-xs font-bold hover:bg-slate-800 transition">
                Back to Home
            </a>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
            <!-- Left: Selection -->
            <div class="space-y-4">
                <h3 class="text-xs font-black uppercase tracking-widest text-slate-500 mb-4">Choose Accent</h3>
                <div id="theme-grid" class="grid grid-cols-2 gap-3">
                    <!-- Themes injected here -->
                </div>
            </div>

            <!-- Right: Live Preview -->
            <div class="bg-slate-900/50 border border-slate-800 rounded-3xl p-6 flex flex-col h-[400px]">
                <h3 class="text-xs font-black uppercase tracking-widest text-slate-500 mb-6">Live Preview</h3>
                
                <div class="flex-1 space-y-4 overflow-hidden">
                    <div class="flex items-start gap-3">
                        <div class="w-8 h-8 rounded-lg bg-slate-800 border border-slate-700 flex items-center justify-center text-[10px] font-bold">JD</div>
                        <div class="bg-slate-800 p-3 rounded-2xl rounded-tl-none max-w-[80%] shadow-md">
                            <p class="text-xs">Hey! Check out this new theme I'm using.</p>
                        </div>
                    </div>

                    <div class="flex flex-col items-end gap-1">
                        <div id="preview-accent-bubble" class="bg-indigo-600 text-white p-3 rounded-2xl rounded-tr-none max-w-[80%] shadow-md preview-bubble">
                            <p class="text-xs">Looks sick! I'm switching mine right now.</p>
                        </div>
                    </div>

                    <div class="flex items-start gap-3">
                        <div class="w-8 h-8 rounded-lg bg-slate-800 border border-slate-700 flex items-center justify-center text-[10px] font-bold">JD</div>
                        <div class="bg-slate-800 p-3 rounded-2xl rounded-tl-none max-w-[80%] shadow-md">
                            <p class="text-xs">The accent colors update everywhere instantly.</p>
                        </div>
                    </div>
                </div>

                <div class="mt-6 pt-6 border-t border-slate-800">
                    <button onclick="saveTheme()" id="save-btn" class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-black py-4 rounded-2xl transition shadow-lg shadow-indigo-500/20 uppercase text-xs tracking-widest">
                        Apply Changes
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const themes = [
            { name: 'Default', hex: '#4f46e5', class: 'indigo' },
            { name: 'Crimson', hex: '#e11d48', class: 'rose' },
            { name: 'Emerald', hex: '#10b981', class: 'emerald' },
            { name: 'Amber', hex: '#f59e0b', class: 'amber' },
            { name: 'Violet', hex: '#7c3aed', class: 'violet' },
            { name: 'Sky', hex: '#0ea5e9', class: 'sky' },
            { name: 'Hot Pink', hex: '#db2777', class: 'pink' },
            { name: 'Slate', hex: '#475569', class: 'slate' }
        ];

        let selectedHex = '#4f46e5';

        window.onload = () => {
            const saved = localStorage.getItem('user_theme');
            if (saved) {
                try {
                    const parsed = JSON.parse(saved);
                    selectedHex = parsed.accent;
                } catch(e) {}
            }
            renderThemes();
            updatePreview();
        };

        function renderThemes() {
            const grid = document.getElementById('theme-grid');
            grid.innerHTML = themes.map(t => `
                <div onclick="selectTheme('${t.hex}')" 
                     class="theme-card bg-slate-900 border-2 ${selectedHex === t.hex ? 'border-indigo-500 bg-indigo-500/5' : 'border-slate-800'} p-4 rounded-2xl flex items-center gap-3">
                    <div class="w-6 h-6 rounded-full shadow-inner" style="background-color: ${t.hex}"></div>
                    <span class="text-xs font-bold text-white">${t.name}</span>
                </div>
            `).join('');
        }

        function selectTheme(hex) {
            selectedHex = hex;
            renderThemes();
            updatePreview();
        }

        function updatePreview() {
            const preview = document.getElementById('preview-accent-bubble');
            const saveBtn = document.getElementById('save-btn');
            
            preview.style.backgroundColor = selectedHex;
            saveBtn.style.backgroundColor = selectedHex;
            
            // Adjust button hover effect slightly with inline style if needed
            saveBtn.onmouseover = () => saveBtn.style.opacity = "0.9";
            saveBtn.onmouseout = () => saveBtn.style.opacity = "1";
        }

        function saveTheme() {
            const themeData = {
                accent: selectedHex,
                timestamp: Date.now()
            };
            localStorage.setItem('user_theme', JSON.stringify(themeData));
            
            // Visual feedback
            const btn = document.getElementById('save-btn');
            const originalText = btn.innerText;
            btn.innerText = "Applied!";
            setTimeout(() => {
                btn.innerText = originalText;
                window.location.href = '/index.html';
            }, 800);
        }
    </script>
</body>
</html>
